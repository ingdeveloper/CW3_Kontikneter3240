<!-- ko addAuthorizationClass: { hasNoAuthorization: hasNoAuthorization} -->
<!-- ko if: isVisible()-->
<div class="wf-alarm-viewer" data-bind="style: { height: height() ? height() + 'px' : 'auto' }">
    <div class="wf-panel" data-bind="css: panelBarCssClass">

        <!-- ko if: headerVisibility -->
        <div class="panel-heading">
            <div class="pull-right wf-panel-toolbar">

                <!-- ko if: hasMore -->
                <span class="label label-info m-r">
                    <i class="wf wf-info"></i>
                    {{ connector.translate('I4SCADA_Has_more')() }}
                </span>
                <!--/ko-->

                <!-- ko if: settingsButtonVisibility() -->
                <button type="button" class="btn btn-default" data-bind="css: buttonBarCssClass, click: showSettings" title="{{connector.translate('I4SCADA_Settings')()}}">
                    <span class="wf wf-filter"></span>
                </button>
                <!-- /ko -->

            </div>

            <h3 class="panel-title p-r-md overflow-x-ellipsis" data-part="panelHeader">
                <span>{{connector.translate(titleText())}}</span>
            </h3>

        </div>
        <!-- /ko -->

        <div class="relative">
            <div class="panel-body p-a-0">
                <div class="overflow-y-scroll p-a-md" data-bind="style: {height: panelBodyHeight() ? panelBodyHeight() + 'px' : 'auto' }, attr: {id: 'wrap_' + id() }">
                    <div class="row">
                        <table class="table table-striped table-hover wf-table-logs" data-bind="fixTableHeader:{ wrapperId: 'wrap_' + id()}, sortTable: {sortFunction: function(index, asc) { sortingData({ index: index, asc: asc }); }, iconCssClass: 'm-l-sm', excludeColumnIndexs: [4]}">
                            <thead>
                                <tr>
                                    <!-- ko foreach: columns.headers -->
                                    <th>
                                        <wf-symbolictext params="symbolicText: $data"></wf-symbolictext>
                                    </th>
                                    <!-- /ko -->
                                    <th>{{$component.connector.translate('I4SCADA_Action')}}</th>
                                </tr>
                            </thead>
                            <tbody data-part="rows">
                                <!--ko foreach: alarms-->
                                <tr data-bind="css:{'success': State === 1, 'danger': State === 0, 'warning': State === 2}">

                                    <!-- ko foreach: $parent.columns.data -->
                                    <!-- ko if: $data === 'State'-->
                                    <td>{{$component.getTranslatesState($parent[$data])}}</td>
                                    <!-- /ko -->
                                    <!-- ko ifnot: $data === 'State'-->
                                    <td>{{$parent[$data]}}</td>
                                    <!-- /ko -->
                                    <!-- /ko -->

                                    <td>     
                                        <select class="form-control" data-bind="value: State, event:{ change: $parent.activateOrDeactivateAlarmStateAsync }, disable: !$component.connector.currentLoggedInUser(), css:{ disabled: !$component.connector.currentLoggedInUser()}" >
                                            <option value="0">{{$component.getTranslatesState(0)}}</option>
                                            <option value="1">{{$component.getTranslatesState(1)}}</option>
                                            <option value="2">{{$component.getTranslatesState(2)}}</option>
                                            <option value="3">{{$component.getTranslatesState(3)}}</option>
                                        </select>
                                    </td>
                                </tr>
                                <!-- /ko -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div data-bind="attr: { id: 'modal-settings-back-container-' + id() }">
        <div class="modal fade wf-panel-settings wf-component-configuration-dialog" tabindex="-1" role="dialog" data-bind="modalDialog: {show: showSettingsDialog, draggable: isModalDialogsDraggable}, attr: { id: 'modal-settings-' + id() }"
            style="display: none;">
            <div class="modal-dialog modal-top">
                <div class="modal-content">
                    <div class="modal-header  modal-primary">
                        <button style="color: rgb(255,255,255)" type="button" class="close" data-dismiss="modal" aria-hidden="true" data-bind="click: closeSettings">&times;</button>
                        <div class="modal-title">
                            <span>{{connector.translate('I4SCADA_Settings')()}}</span>
                        </div>
                    </div>

                    <div class="modal-body wf-panel-settings">
                        <div class="form-group">
                            <label>{{connector.translate('I4SCADA_Alarm_Tag')()}}</label>
                            <div class="relative">
                                <i class="wf wf-search wf-input-icon-right opacity-50"></i>
                                <input type="text" class="form-control" data-bind="textInput:pattern, attr: {placeholder: connector.translate('I4SCADA_Input_a_part_of_an_alarm_tag')()}, disable: isLoading"/>
                                <!-- ko if: isLoading -->
                                <div class="wf-loader wf-loader-input active" data-bind="css: { active: isLoading }"></div>
                                <!-- /ko-->
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6 form-group">
                                <label>{{connector.translate('I4SCADA_Alarm_typ')()}}</label>
                                <div class="flexbox">
                                    <!--ko with: connector.translate('I4SCADA_Nothing_selected') -->
                                    <select  multiple="true" class="form-control flex-auto" data-bind="selectpicker: {
                                                options: $parent.alarmTypes,     
                                                size:10,
                                                optionsTitle: $data,
                                                selectedOptions: $parent.selectedAlarmTypes,
                                                liveSearch: true},
                                                optionsText:'SymbolicTextTranslation',
                                                optionsValue:'SymbolicTextName',
                                                disable: $parent.isLoading"></select>
                                    <!--/ko-->
                                </div>                               
                            </div>

                            <div class="col-sm-6 form-group">
                                <label>{{connector.translate('I4SCADA_Alarm_groups')()}}</label>

                                <div class="flexbox">
                                    <!--ko with: connector.translate('I4SCADA_Nothing_selected') -->
                                    <select  multiple="true" class="form-control flex-auto" data-bind="selectpicker: {
                                                options: $parent.alarmGroups,     
                                                size:10,                              
                                                optionsTitle: $data,
                                                selectedOptions: $parent.selectedAlarmGroups,
                                                liveSearch: true},
                                                optionsText:'SymbolicTextTranslation',
                                                optionsValue:'SymbolicTextName',
                                                disable: $parent.isLoading"></select>
                                    <!--/ko-->
                                </div>                   
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="btn-group">
                            <button class="btn btn-default" data-bind="click: closeSettings">
                                <i class="wf wf-close-round-o"></i>
                                {{connector.translate('I4SCADA_Close')()}}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- /ko -->
<!-- /ko -->