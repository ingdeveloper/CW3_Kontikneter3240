<!-- ko if: hasAuthorization && isVisible-->
<div class="relative">

    <div class="input-group" data-bind="css: inputSize, attr : {title: tooltipText}, style: {width: elemWidth().all, fontSize: fontSize}">
        <!-- ko if: iconClass || label || signalNameLabel -->
        <span class="input-group-addon label wf-label-addon">
            <span class="">
                <!-- ko if: iconClass -->
                <i class="label wf-label-icon" data-bind="css: iconClass, attr: { style: iconStyle }"></i>
                <!-- /ko -->
                <!-- ko if: label -->
                <span>{{connector.translate(label)()}}</span>
                <!-- /ko -->
                <!-- ko if: signalNameLabel -->
                <span data-bind="text: signalName, visible: signalNameLabel, style:{fontSize: fontSize}"></span>
                <!-- /ko -->
            </span>
        </span>
        <!-- /ko -->

        <div class="ccw-wf-input-tastatur nowrap" data-bind="css: displayClassNames">
            <input onfocus="this.select()" class="ccw-form-control ccw-wf-input-tastatur-display" data-bind="click: function(data, event) { openPopup(data, event) }, value: signalValue, css: displayClassNames, attr: { style: textStyle, type: textType, id: inputId, readOnly: isDisabled },
                            hasfocus: isSelected, valueUpdate: 'keyup',
                            event: { keyup: keyupEventHandler, contextmenu: function(){aliasInfo()}}, style:{width: elemWidth().val, textAlign:textAlign, fontSize: fontSize }"
                oncontextmenu="return false" style="border: 0px solid black !important;" />

            <!-- ko if: staticUnitText -->
            <div class="ccw-wf-input-tastatur-display" data-bind="text: staticUnitText, visible: settings.staticUnitText, style:{fontSize: fontSize }"></div>
            <!-- /ko -->
        </div>
        <!-- ko if: unitLabel -->
        <!--geändert am 2.02.2018-->
        <!-- ko ifnot: staticUnitText -->
        <span>
            <wf-signal-information params="signalName: signalName, propertyName: 'Unit'"></wf-signal-information>
        </span>
        <!-- /ko -->
        <!-- /ko -->

    </div>



    <!-- Hier das kleine Popover -->
    <div class="input-popover popover top" style="display: none;" data-bind="visible: isEditing">
        <div class="arrow"></div>
        <div class="popover-content">
            <div class="btn-group">
                <button class="btn btn-success" type="button" data-bind="click: writeInputValue, visible: isEditing">
                    <i class="wf wf-check"></i>
                </button>
                <button class="btn btn-default" type="button" data-bind="click: resetInputValue, visible: isEditing">
                    <i class="wf wf-arrow-undo"></i>
                </button>
            </div>
        </div>
    </div>


    <div data-bind="attr: { id: 'modal-dialog-container-' + id() }">
        <div class="modal fade" tabindex="-1" role="dialog" data-bind="modalDialog: { show: show, draggable: draggable } , attr: { id: 'modal-dialog-' + id() }, event: { keyup: keyupEventHandler2}"
            style="display: none; z-index: 9999 !important;" data-backdrop="static" data-keyboard="false">
            <!-- Verhindern, dass ESC das Modal schließt -->

            <div class="modal-dialog modal-top" style="position: absolute;" data-bind="style: { top: top()+'px', left: left()+'px', width: breite()+'px'}">

                <div class="modal-content ccw-wf-in-tast" draggable="true" data-bind="draggable:{isResizable: false, showCssBox: false, showCoordinates: false, showClassAttr: false}, css: cssAusrichtung(), event:{dragstart: dragStart}">
                    <div class="ccw-arrow"></div>
                    <div class="modal-body">
                        <!-- ZIFFERN-TASTATUR ANZEIGEN -->
                        <div data-bind="visible: isEditingZiffer()">
                            <div>
                                <span>
                                    <i class="fa fa-keyboard-o fa-2x ccw-zifferIconEcke" data-bind="click: function (){toggleAnzeigeZifferBuchstaben()}"></i>
                                </span>
                                <table>
                                    <tr>
                                        <td>
                                            <span class="ccw-wf-input-tastatur-zifferUeberschrift">Anlage:&nbsp;</span>
                                        </td>
                                        <td>
                                            <span data-bind="text: signalWfDbWert" class="ccw-wf-input-tastatur-zifferWertRahmen"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="ccw-wf-input-tastatur-zifferUeberschrift2">Eingabe:&nbsp;</span>
                                        </td>
                                        <td>
                                            <span data-bind="text: uncommittedValue" class="ccw-wf-input-tastatur-zifferWertRahmen2"></span>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div>
                                <table>
                                    <tr>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(1)}">1</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(2)}">2</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(3)}">3</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(4)}">4</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(5)}">5</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(6)}">6</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(7)}">7</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(8)}">8</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(9)}">9</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setPlusMinus()}">+/-</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setZiffer(0)}">0</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setKomma()}">,</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="ziffertd">
                                            <button class="btn btn-primary ccw-zifferButton" type="button" data-bind="click: resetInputValue">
                                                <i class="wf wf-arrow-undo"></i>
                                            </button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-success ccw-zifferButton" type="button" data-bind="click: function(){setCLR()}">CLR</button>
                                        </td>
                                        <td class="ziffertd">
                                            <button class="btn btn-warning ccw-zifferButton" type="button" data-bind="click: writeInputValue">OK</button>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- BUCHSTABEN-TASTATUR ANZEIGEN -->
                        <div data-bind="visible: isEditingString(), css: cssAusrichtung()">
                            <div>
                                <div>
                                    <span>
                                        <i class="fa fa-th fa-2x ccw-zifferIconEcke" data-bind="click: function (){toggleAnzeigeZifferBuchstaben()}"></i>
                                    </span>
                                    <table>
                                        <tr>
                                            <td>
                                                <span class="ccw-wf-input-tastatur-zifferUeberschrift">Anlage:&nbsp;</span>
                                            </td>
                                            <td>
                                                <span data-bind="text: signalWfDbWert" class="ccw-wf-input-tastatur-zifferWertRahmen"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="ccw-wf-input-tastatur-zifferUeberschrift2">Eingabe:&nbsp;</span>
                                            </td>
                                            <td>
                                                <span data-bind="text: uncommittedValue" class="ccw-wf-input-tastatur-zifferWertRahmen2"></span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                                <div data-bind="foreach: keyboardTastenAnzeigen()">
                                    <div style="display: flex; align-items: center; justify-content: center;">
                                        <!-- ko foreach: $data -->
                                        <!-- Zeile für Zeile lesen und die Array-Indexe ausgeben -->
                                        <div class="zeichentd inline-block">
                                            <button class="btn ccw-zeichenButton" type="button" data-bind="html: $data.char, style: {min-width: ($data.minWidth + 'px')} ,click: function(){$parents[1].setZeichen($parentContext.$index(),$index())}, css: $data.bgcolor">a</button>
                                        </div>
                                        <!--$parents[1] geht ein Eltern-Element zurück-->
                                        <!-- /ko -->
                                        <div class="clearfix"></div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



</div>
<!--/ko-->